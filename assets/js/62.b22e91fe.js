(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{463:function(t,s,a){"use strict";a.r(s);var n=a(34),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),a("h4",{attrs:{id:"什么是跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是跨域"}},[t._v("#")]),t._v(" 什么是跨域？")]),t._v(" "),a("p",[t._v("简单来说跨域是指，一个网站下的网页向另外一个网站请求资源(包括图片、文字等等)，这就形成了跨域。比如说：link、script、img都可以引入其他网站的文件。")]),t._v(" "),a("p",[t._v("跨域主要分为5大类型：")]),t._v(" "),a("ol",[a("li",[t._v("域名不同：http://www.a.com 和 http://www.b.com")]),t._v(" "),a("li",[t._v("子级域名不同：http://ab.bai.com 和 http://ba.bai.com")]),t._v(" "),a("li",[t._v("端口不同：http://localhost:3000 和 http://localhost:5000")]),t._v(" "),a("li",[t._v("协议不同: http://12306.cn 和 https://12306.cn")]),t._v(" "),a("li",[t._v("同一台电脑，自己的域名和IP互访：\nhttp://localhost:3000 和 http://127.0.0.1:3000")])]),t._v(" "),a("h4",{attrs:{id:"什么是同源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是同源"}},[t._v("#")]),t._v(" 什么是同源？")]),t._v(" "),a("p",[a("strong",[t._v("同源策略")]),t._v("：同源策略是"),a("strong",[t._v("浏览器")]),t._v("定义的，他主要是解决"),a("strong",[t._v("浏览器的安全问题")]),t._v("存在的，它禁止ajax使用其他服务器来源的数据，只有"),a("strong",[t._v("响应头中的来源地址和当前网页的地址")]),t._v("相同，才允许使用该数据。\n所以我们如果要跨域获取数据，就会被浏览器拦截！")]),t._v(" "),a("h4",{attrs:{id:"为什么要跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要跨域"}},[t._v("#")]),t._v(" 为什么要跨域？")]),t._v(" "),a("p",[t._v("那么问题来了，我们为什么要跨域请求呢：实际上我们在真实项目中，前后端项目是分离开的，不是一个人在自己电脑上开发的。在开发联调时，我们要想从前端向后端请求数据，就必然会涉及到跨域请求。")]),t._v(" "),a("h4",{attrs:{id:"怎么解决跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么解决跨域"}},[t._v("#")]),t._v(" 怎么解决跨域？")]),t._v(" "),a("p",[t._v("那么如何解决这个问题呢：")]),t._v(" "),a("ul",[a("li",[t._v("CORS跨域")]),t._v(" "),a("li",[t._v("JSONP跨域")]),t._v(" "),a("li",[t._v("Proxy前端代理")])]),t._v(" "),a("p",[t._v("简单讲一下使用CORS中间件：")]),t._v(" "),a("p",[t._v("原理就是在服务器端给客户端响应数据前，将接口的响应头地址改为客户端对应的地址(伪装)，例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Access-Control-Allow-Origin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"客户端地址:端口号"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Content-Type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json;charset=utf-8"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);